{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"authorizeOracle","inputs":[{"name":"_oracle","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"authorizedOracles","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"getPaymentVerification","inputs":[{"name":"_stripePaymentIntentId","type":"string","internalType":"string"}],"outputs":[{"name":"verification","type":"tuple","internalType":"struct PaymentRouter.PaymentVerification","components":[{"name":"stripePaymentIntentId","type":"string","internalType":"string"},{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"payer","type":"address","internalType":"address"},{"name":"payee","type":"address","internalType":"address"},{"name":"timestamp","type":"uint256","internalType":"uint256"},{"name":"verified","type":"bool","internalType":"bool"},{"name":"ap2MandateId","type":"bytes32","internalType":"bytes32"}]}],"stateMutability":"view"},{"type":"function","name":"isAuthorizedOracle","inputs":[{"name":"_oracle","type":"address","internalType":"address"}],"outputs":[{"name":"authorized","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isMandateValid","inputs":[{"name":"_mandateId","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"valid","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"recordPaymentVerification","inputs":[{"name":"_stripePaymentIntentId","type":"string","internalType":"string"},{"name":"_amount","type":"uint256","internalType":"uint256"},{"name":"_payer","type":"address","internalType":"address"},{"name":"_payee","type":"address","internalType":"address"},{"name":"_ap2MandateId","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"registerMandate","inputs":[{"name":"_mandateId","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"revokeMandate","inputs":[{"name":"_mandateId","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"revokeOracle","inputs":[{"name":"_oracle","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"transferOwnership","inputs":[{"name":"_newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"validMandates","inputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"verifications","inputs":[{"name":"","type":"string","internalType":"string"}],"outputs":[{"name":"stripePaymentIntentId","type":"string","internalType":"string"},{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"payer","type":"address","internalType":"address"},{"name":"payee","type":"address","internalType":"address"},{"name":"timestamp","type":"uint256","internalType":"uint256"},{"name":"verified","type":"bool","internalType":"bool"},{"name":"ap2MandateId","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"verifyPayment","inputs":[{"name":"_stripePaymentIntentId","type":"string","internalType":"string"},{"name":"_expectedAmount","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"verified","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"MandateRegistered","inputs":[{"name":"mandateId","type":"bytes32","indexed":true,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"MandateRevoked","inputs":[{"name":"mandateId","type":"bytes32","indexed":true,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"OracleAuthorized","inputs":[{"name":"oracle","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"OracleRevoked","inputs":[{"name":"oracle","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"PaymentVerified","inputs":[{"name":"stripePaymentIntentId","type":"string","indexed":true,"internalType":"string"},{"name":"payer","type":"address","indexed":true,"internalType":"address"},{"name":"payee","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"ap2MandateId","type":"bytes32","indexed":false,"internalType":"bytes32"}],"anonymous":false},{"type":"error","name":"InvalidAmount","inputs":[]},{"type":"error","name":"InvalidMandate","inputs":[]},{"type":"error","name":"PaymentAlreadyVerified","inputs":[]},{"type":"error","name":"PaymentNotVerified","inputs":[]},{"type":"error","name":"Unauthorized","inputs":[]}],"bytecode":{"object":"0x60808060405234603c573360018060a01b03196003541617600355335f525f60205260405f20600160ff19825416179055610b7e90816100418239f35b5f80fdfe6080806040526004361015610012575f80fd5b5f3560e01c9081630ec3e8aa14610959575080630f13b763146108e7578063134a10e514610883578063554dfef0146107fa5780635983e6b01461078b57806361c992a3146104d75780638da5cb5b146107635780639b5b2ef61461068b578063a871ba2914610513578063bfe609da146104d7578063cff89921146104a8578063d91ebc2a14610447578063dddacc01146101155763f2fde38b146100b6575f80fd5b34610111576020366003190112610111576100cf610984565b600354906001600160a01b0382163303610103576001600160a01b0316908115610103576001600160a01b03191617600355005b6282b42960e81b5f5260045ffd5b5f80fd5b346101115760a03660031901126101115760043567ffffffffffffffff81116101115761014690369060040161099a565b906044356001600160a01b038116919060243590839003610111576064356001600160a01b03811694908590036101115760843592335f525f60205260ff60405f20541615610103576004604051838382376020818581016001815203019020015461043857835f52600260205260ff60405f2054161561042957821561041a576040516101d3816109c8565b6101de368484610a06565b8152602081018481526040820187815260608301898152608084019042825260a08501926001845260c08601948a8652604051898982376020818b81016001815203019020965180519067ffffffffffffffff8211610406576102418954610a4c565b601f81116103c1575b50602090601f831160011461032e5792827f42356319803fde5a7778a2901cb1d724073098f0d8b35bed608f2169a5a810eb9d9b99969360409d9b999693600699965f92610323575b50508160011b915f199060031b1c19161788555b516001880155516002870180546001600160a01b039283166001600160a01b03199182161790915591516003880180549190921692169190911790555160048501555160058401805460ff191691151560ff169190911790555191015583519182918190833781015f81520390209382519182526020820152a4005b015190505f80610293565b90601f198316918a5f52815f20925f5b8181106103a957509360409d9b9996937f42356319803fde5a7778a2901cb1d724073098f0d8b35bed608f2169a5a810eb9f9d9b9895936001938360069c999610610391575b505050811b0188556102a7565b01515f1960f88460031b161c191690555f8080610384565b9293602060018192878601518155019501930161033e565b895f5260205f20601f840160051c810191602085106103fc575b601f0160051c01905b8181106103f1575061024a565b5f81556001016103e4565b90915081906103db565b634e487b7160e01b5f52604160045260245ffd5b63162908e360e11b5f5260045ffd5b632a2656bf60e11b5f5260045ffd5b63d1a1c11160e01b5f5260045ffd5b3461011157602036600319011261011157600354600435906001600160a01b0316330361010357805f52600260205260405f2060ff1981541690557f31c289dd93001fcacb63a0874240a9d06870135458e9be63e0463f46edf663fa5f80a2005b34610111576020366003190112610111576004355f526002602052602060ff60405f2054166040519015158152f35b34610111576020366003190112610111576001600160a01b036104f8610984565b165f525f602052602060ff60405f2054166040519015158152f35b346101115760203660031901126101115760043567ffffffffffffffff81116101115761054490369060040161099a565b5f60c0604051610553816109c8565b606081528260208201528260408201528260608201528260808201528260a08201520152600460405182848237602081848101600181520301902001541561067c5760206106449282604051938492833781016001815203019020604051906105bb826109c8565b6105c481610a84565b82526001810154906020830191825260018060a01b03600282015416906040840191825260018060a01b036003820154166060850190815260048201549060808601918252600660ff6005850154169360a08801941515855201549360c08701948552604051978897602089525160e060208a0152610100890190610b24565b95516040880152516001600160a01b03908116606088015290511660808601525160a085015251151560c08401525160e08301520390f35b638f26703160e01b5f5260045ffd5b346101115760203660031901126101115760043567ffffffffffffffff81116101115736602382011215610111576020806106d361073e933690602481600401359101610a06565b604051928184925191829101835e810160018152030190206106f481610a84565b9060018101549060018060a01b036002820154169060018060a01b03600382015416600482015490600660ff6005850154169301549360405197889760e0895260e0890190610b24565b956020880152604087015260608601526080850152151560a084015260c08301520390f35b34610111575f366003190112610111576003546040516001600160a01b039091168152602090f35b34610111576020366003190112610111576107a4610984565b6003546001600160a01b03163303610103576001600160a01b03165f818152602081905260408120805460ff191690557f3c9c4af7c4c66de2ffc68abfa4e0d275fbce92f248473bca0d6787dc8caf8e319080a2005b346101115760403660031901126101115760043567ffffffffffffffff811161011157602061082e8192369060040161099a565b91908260405193849283378101600181520301902060ff6005820154169081610871575b81610863575b506040519015158152f35b600491500154151582610858565b90506024356001820154101590610852565b3461011157602036600319011261011157600354600435906001600160a01b0316330361010357805f52600260205260405f20600160ff198254161790557fad13e681c71ddff5544a754ba5719add872a92d1403ca0a36d5a522181f75d145f80a2005b3461011157602036600319011261011157610900610984565b6003546001600160a01b03163303610103576001600160a01b03165f818152602081905260408120805460ff191660011790557f5a7a3f71a35f5e2589980d29d1c6d8c75e39657751190874081e55208bae24b79080a2005b34610111576020366003190112610111576020906004355f526002825260ff60405f20541615158152f35b600435906001600160a01b038216820361011157565b9181601f840112156101115782359167ffffffffffffffff8311610111576020838186019501011161011157565b60e0810190811067ffffffffffffffff82111761040657604052565b90601f8019910116810190811067ffffffffffffffff82111761040657604052565b92919267ffffffffffffffff82116104065760405191610a30601f8201601f1916602001846109e4565b829481845281830111610111578281602093845f960137010152565b90600182811c92168015610a7a575b6020831014610a6657565b634e487b7160e01b5f52602260045260245ffd5b91607f1691610a5b565b9060405191825f825492610a9784610a4c565b8084529360018116908115610b025750600114610abe575b50610abc925003836109e4565b565b90505f9291925260205f20905f915b818310610ae6575050906020610abc928201015f610aaf565b6020919350806001915483858901015201910190918492610acd565b905060209250610abc94915060ff191682840152151560051b8201015f610aaf565b805180835260209291819084018484015e5f828201840152601f01601f191601019056fea2646970667358221220a69cbbab1e2e3caba59fa3342be90a0ae6e133c4fde358fdc06697237c5af29864736f6c634300081a0033","sourceMap":"256:6392:24:-:0;;;;;;;2172:10;256:6392;;;;;;2164:18;256:6392;;;2164:18;256:6392;2172:10;-1:-1:-1;256:6392:24;-1:-1:-1;256:6392:24;;;-1:-1:-1;256:6392:24;2224:4;256:6392;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x6080806040526004361015610012575f80fd5b5f3560e01c9081630ec3e8aa14610959575080630f13b763146108e7578063134a10e514610883578063554dfef0146107fa5780635983e6b01461078b57806361c992a3146104d75780638da5cb5b146107635780639b5b2ef61461068b578063a871ba2914610513578063bfe609da146104d7578063cff89921146104a8578063d91ebc2a14610447578063dddacc01146101155763f2fde38b146100b6575f80fd5b34610111576020366003190112610111576100cf610984565b600354906001600160a01b0382163303610103576001600160a01b0316908115610103576001600160a01b03191617600355005b6282b42960e81b5f5260045ffd5b5f80fd5b346101115760a03660031901126101115760043567ffffffffffffffff81116101115761014690369060040161099a565b906044356001600160a01b038116919060243590839003610111576064356001600160a01b03811694908590036101115760843592335f525f60205260ff60405f20541615610103576004604051838382376020818581016001815203019020015461043857835f52600260205260ff60405f2054161561042957821561041a576040516101d3816109c8565b6101de368484610a06565b8152602081018481526040820187815260608301898152608084019042825260a08501926001845260c08601948a8652604051898982376020818b81016001815203019020965180519067ffffffffffffffff8211610406576102418954610a4c565b601f81116103c1575b50602090601f831160011461032e5792827f42356319803fde5a7778a2901cb1d724073098f0d8b35bed608f2169a5a810eb9d9b99969360409d9b999693600699965f92610323575b50508160011b915f199060031b1c19161788555b516001880155516002870180546001600160a01b039283166001600160a01b03199182161790915591516003880180549190921692169190911790555160048501555160058401805460ff191691151560ff169190911790555191015583519182918190833781015f81520390209382519182526020820152a4005b015190505f80610293565b90601f198316918a5f52815f20925f5b8181106103a957509360409d9b9996937f42356319803fde5a7778a2901cb1d724073098f0d8b35bed608f2169a5a810eb9f9d9b9895936001938360069c999610610391575b505050811b0188556102a7565b01515f1960f88460031b161c191690555f8080610384565b9293602060018192878601518155019501930161033e565b895f5260205f20601f840160051c810191602085106103fc575b601f0160051c01905b8181106103f1575061024a565b5f81556001016103e4565b90915081906103db565b634e487b7160e01b5f52604160045260245ffd5b63162908e360e11b5f5260045ffd5b632a2656bf60e11b5f5260045ffd5b63d1a1c11160e01b5f5260045ffd5b3461011157602036600319011261011157600354600435906001600160a01b0316330361010357805f52600260205260405f2060ff1981541690557f31c289dd93001fcacb63a0874240a9d06870135458e9be63e0463f46edf663fa5f80a2005b34610111576020366003190112610111576004355f526002602052602060ff60405f2054166040519015158152f35b34610111576020366003190112610111576001600160a01b036104f8610984565b165f525f602052602060ff60405f2054166040519015158152f35b346101115760203660031901126101115760043567ffffffffffffffff81116101115761054490369060040161099a565b5f60c0604051610553816109c8565b606081528260208201528260408201528260608201528260808201528260a08201520152600460405182848237602081848101600181520301902001541561067c5760206106449282604051938492833781016001815203019020604051906105bb826109c8565b6105c481610a84565b82526001810154906020830191825260018060a01b03600282015416906040840191825260018060a01b036003820154166060850190815260048201549060808601918252600660ff6005850154169360a08801941515855201549360c08701948552604051978897602089525160e060208a0152610100890190610b24565b95516040880152516001600160a01b03908116606088015290511660808601525160a085015251151560c08401525160e08301520390f35b638f26703160e01b5f5260045ffd5b346101115760203660031901126101115760043567ffffffffffffffff81116101115736602382011215610111576020806106d361073e933690602481600401359101610a06565b604051928184925191829101835e810160018152030190206106f481610a84565b9060018101549060018060a01b036002820154169060018060a01b03600382015416600482015490600660ff6005850154169301549360405197889760e0895260e0890190610b24565b956020880152604087015260608601526080850152151560a084015260c08301520390f35b34610111575f366003190112610111576003546040516001600160a01b039091168152602090f35b34610111576020366003190112610111576107a4610984565b6003546001600160a01b03163303610103576001600160a01b03165f818152602081905260408120805460ff191690557f3c9c4af7c4c66de2ffc68abfa4e0d275fbce92f248473bca0d6787dc8caf8e319080a2005b346101115760403660031901126101115760043567ffffffffffffffff811161011157602061082e8192369060040161099a565b91908260405193849283378101600181520301902060ff6005820154169081610871575b81610863575b506040519015158152f35b600491500154151582610858565b90506024356001820154101590610852565b3461011157602036600319011261011157600354600435906001600160a01b0316330361010357805f52600260205260405f20600160ff198254161790557fad13e681c71ddff5544a754ba5719add872a92d1403ca0a36d5a522181f75d145f80a2005b3461011157602036600319011261011157610900610984565b6003546001600160a01b03163303610103576001600160a01b03165f818152602081905260408120805460ff191660011790557f5a7a3f71a35f5e2589980d29d1c6d8c75e39657751190874081e55208bae24b79080a2005b34610111576020366003190112610111576020906004355f526002825260ff60405f20541615158152f35b600435906001600160a01b038216820361011157565b9181601f840112156101115782359167ffffffffffffffff8311610111576020838186019501011161011157565b60e0810190811067ffffffffffffffff82111761040657604052565b90601f8019910116810190811067ffffffffffffffff82111761040657604052565b92919267ffffffffffffffff82116104065760405191610a30601f8201601f1916602001846109e4565b829481845281830111610111578281602093845f960137010152565b90600182811c92168015610a7a575b6020831014610a6657565b634e487b7160e01b5f52602260045260245ffd5b91607f1691610a5b565b9060405191825f825492610a9784610a4c565b8084529360018116908115610b025750600114610abe575b50610abc925003836109e4565b565b90505f9291925260205f20905f915b818310610ae6575050906020610abc928201015f610aaf565b6020919350806001915483858901015201910190918492610acd565b905060209250610abc94915060ff191682840152151560051b8201015f610aaf565b805180835260209291819084018484015e5f828201840152601f01601f191601019056fea2646970667358221220a69cbbab1e2e3caba59fa3342be90a0ae6e133c4fde358fdc06697237c5af29864736f6c634300081a0033","sourceMap":"256:6392:24:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;;;:::i;:::-;1932:5;256:6392;;-1:-1:-1;;;;;256:6392:24;;1918:10;:19;1914:46;;-1:-1:-1;;;;;256:6392:24;;6566:23;;6562:50;;-1:-1:-1;;;;;;256:6392:24;;1932:5;256:6392;;6562:50;1946:14;;;256:6392;6598:14;256:6392;;6598:14;256:6392;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;;;;;;;;;;;;;;;:::i;:::-;;;;-1:-1:-1;;;;;256:6392:24;;;;;;;;;;;;;;-1:-1:-1;;;;;256:6392:24;;;;;;;;;;;2039:10;;256:6392;;;;;;;;;;;2020:30;2016:57;;256:6392;;;;;;;;;;;;;;;;;;;3841:47;256:6392;3837:114;;256:6392;;;3966:13;256:6392;;;;;;;;3965:29;3961:58;;4033:12;;4029:40;;256:6392;;;;;:::i;:::-;;;;;;:::i;:::-;;;;4120:282;;256:6392;;;;4120:282;;256:6392;;;;4120:282;;256:6392;;;;4120:282;;4307:15;;256:6392;;;4120:282;;256:6392;;;;4120:282;;;256:6392;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;4418:149;256:6392;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3966:13;256:6392;;;;-1:-1:-1;;;;;256:6392:24;;;-1:-1:-1;;;;;;256:6392:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4418:149;256:6392;;;;;-1:-1:-1;256:6392:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4418:149;256:6392;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;256:6392:24;;;;;;;;;;;;;;;;4029:40;4054:15;;;256:6392;4054:15;256:6392;;4054:15;3961:58;4003:16;;;256:6392;4003:16;256:6392;;4003:16;3837:114;3916:24;;;256:6392;3916:24;256:6392;;3916:24;256:6392;;;;;;-1:-1:-1;;256:6392:24;;;;1932:5;256:6392;;;;-1:-1:-1;;;;;256:6392:24;1918:10;:19;1914:46;;256:6392;;;3201:13;256:6392;;;;;;;;;;;;3249:26;256:6392;3249:26;;256:6392;;;;;;;-1:-1:-1;;256:6392:24;;;;;;;;6036:13;256:6392;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;-1:-1:-1;;;;;256:6392:24;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5612:13;256:6392;;;;;;5612:47;256:6392;5612:52;5608:110;;256:6392;;;;;;;;;;;;;5612:13;256:6392;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;5612:13;256:6392;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;-1:-1:-1;;;;;256:6392:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5608:110;5687:20;;;256:6392;5687:20;256:6392;;5687:20;256:6392;;;;;;-1:-1:-1;;256:6392:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;1015:59;256:6392;;;;;;1015:59;;;:::i;:::-;;;;;256:6392;;;;;;;1015:59;;;256:6392;;;;;;;;1015:59;;;256:6392;;;1015:59;;256:6392;1015:59;;256:6392;1015:59;;;256:6392;;1015:59;;256:6392;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;1227:20;256:6392;;;-1:-1:-1;;;;;256:6392:24;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;;;:::i;:::-;1932:5;256:6392;-1:-1:-1;;;;;256:6392:24;1918:10;:19;1914:46;;-1:-1:-1;;;;;256:6392:24;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;2716:22;;256:6392;2716:22;256:6392;;;;;;;-1:-1:-1;;256:6392:24;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;5118:21;;;256:6392;;5118:75;;;;256:6392;5118:118;;;256:6392;;;;;;;;;;5118:118;256:6392;5209:22;;;256:6392;5209:27;;5118:118;;;:75;256:6392;;;;;5155:19;;256:6392;5155:38;;5118:75;;;256:6392;;;;;;-1:-1:-1;;256:6392:24;;;;1932:5;256:6392;;;;-1:-1:-1;;;;;256:6392:24;1918:10;:19;1914:46;;256:6392;;;2936:13;256:6392;;;;;;;;;;;;;;2983:29;256:6392;2983:29;;256:6392;;;;;;;-1:-1:-1;;256:6392:24;;;;;;:::i;:::-;1932:5;256:6392;-1:-1:-1;;;;;256:6392:24;1918:10;:19;1914:46;;-1:-1:-1;;;;;256:6392:24;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;;2462:25;;256:6392;2462:25;256:6392;;;;;;;-1:-1:-1;;256:6392:24;;;;;;;;;;1144:45;256:6392;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;256:6392:24;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;-1:-1:-1;;256:6392:24;;;;;:::i;:::-;;;;;;;;;;;;;;;;;-1:-1:-1;256:6392:24;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;256:6392:24;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;:::o;:::-;;;-1:-1:-1;256:6392:24;;;;;-1:-1:-1;256:6392:24;;-1:-1:-1;256:6392:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;256:6392:24;;;;;;;;-1:-1:-1;;256:6392:24;;;;:::o","linkReferences":{}},"methodIdentifiers":{"authorizeOracle(address)":"0f13b763","authorizedOracles(address)":"61c992a3","getPaymentVerification(string)":"a871ba29","isAuthorizedOracle(address)":"bfe609da","isMandateValid(bytes32)":"cff89921","owner()":"8da5cb5b","recordPaymentVerification(string,uint256,address,address,bytes32)":"dddacc01","registerMandate(bytes32)":"134a10e5","revokeMandate(bytes32)":"d91ebc2a","revokeOracle(address)":"5983e6b0","transferOwnership(address)":"f2fde38b","validMandates(bytes32)":"0ec3e8aa","verifications(string)":"9b5b2ef6","verifyPayment(string,uint256)":"554dfef0"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.26+commit.8a97fa7a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"InvalidAmount\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidMandate\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PaymentAlreadyVerified\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PaymentNotVerified\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"mandateId\",\"type\":\"bytes32\"}],\"name\":\"MandateRegistered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"mandateId\",\"type\":\"bytes32\"}],\"name\":\"MandateRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"}],\"name\":\"OracleAuthorized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"}],\"name\":\"OracleRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"string\",\"name\":\"stripePaymentIntentId\",\"type\":\"string\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payee\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ap2MandateId\",\"type\":\"bytes32\"}],\"name\":\"PaymentVerified\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_oracle\",\"type\":\"address\"}],\"name\":\"authorizeOracle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"authorizedOracles\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_stripePaymentIntentId\",\"type\":\"string\"}],\"name\":\"getPaymentVerification\",\"outputs\":[{\"components\":[{\"internalType\":\"string\",\"name\":\"stripePaymentIntentId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"payee\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"verified\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"ap2MandateId\",\"type\":\"bytes32\"}],\"internalType\":\"struct PaymentRouter.PaymentVerification\",\"name\":\"verification\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_oracle\",\"type\":\"address\"}],\"name\":\"isAuthorizedOracle\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"authorized\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_mandateId\",\"type\":\"bytes32\"}],\"name\":\"isMandateValid\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"valid\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_stripePaymentIntentId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_payer\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_payee\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_ap2MandateId\",\"type\":\"bytes32\"}],\"name\":\"recordPaymentVerification\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_mandateId\",\"type\":\"bytes32\"}],\"name\":\"registerMandate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_mandateId\",\"type\":\"bytes32\"}],\"name\":\"revokeMandate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_oracle\",\"type\":\"address\"}],\"name\":\"revokeOracle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"validMandates\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"name\":\"verifications\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"stripePaymentIntentId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"payee\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"verified\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"ap2MandateId\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_stripePaymentIntentId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"_expectedAmount\",\"type\":\"uint256\"}],\"name\":\"verifyPayment\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"verified\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Oracle-based verification of off-chain payment proofs with on-chain anchoring\",\"kind\":\"dev\",\"methods\":{\"authorizeOracle(address)\":{\"params\":{\"_oracle\":\"Address to authorize\"}},\"getPaymentVerification(string)\":{\"params\":{\"_stripePaymentIntentId\":\"Stripe payment intent ID\"},\"returns\":{\"verification\":\"Payment verification structure\"}},\"isAuthorizedOracle(address)\":{\"params\":{\"_oracle\":\"Address to check\"},\"returns\":{\"authorized\":\"True if address is an authorized oracle\"}},\"isMandateValid(bytes32)\":{\"params\":{\"_mandateId\":\"AP2 mandate credential ID\"},\"returns\":{\"valid\":\"True if mandate is valid\"}},\"recordPaymentVerification(string,uint256,address,address,bytes32)\":{\"params\":{\"_amount\":\"Payment amount\",\"_ap2MandateId\":\"AP2 mandate credential reference\",\"_payee\":\"Payee address\",\"_payer\":\"Payer address\",\"_stripePaymentIntentId\":\"Stripe payment intent ID\"}},\"registerMandate(bytes32)\":{\"params\":{\"_mandateId\":\"AP2 mandate credential ID\"}},\"revokeMandate(bytes32)\":{\"params\":{\"_mandateId\":\"AP2 mandate credential ID\"}},\"revokeOracle(address)\":{\"params\":{\"_oracle\":\"Address to revoke\"}},\"transferOwnership(address)\":{\"params\":{\"_newOwner\":\"New owner address\"}},\"verifyPayment(string,uint256)\":{\"params\":{\"_expectedAmount\":\"Expected payment amount\",\"_stripePaymentIntentId\":\"Stripe payment intent ID\"},\"returns\":{\"verified\":\"True if payment is verified and amount matches\"}}},\"title\":\"PaymentRouter\",\"version\":1},\"userdoc\":{\"errors\":{\"Unauthorized()\":[{\"notice\":\"Errors\"}]},\"events\":{\"PaymentVerified(string,address,address,uint256,bytes32)\":{\"notice\":\"Events\"}},\"kind\":\"user\",\"methods\":{\"authorizeOracle(address)\":{\"notice\":\"Authorize an oracle address\"},\"authorizedOracles(address)\":{\"notice\":\"Authorized oracle addresses for payment verification\"},\"constructor\":{\"notice\":\"Constructor\"},\"getPaymentVerification(string)\":{\"notice\":\"Get payment verification details\"},\"isAuthorizedOracle(address)\":{\"notice\":\"Check if an address is an authorized oracle\"},\"isMandateValid(bytes32)\":{\"notice\":\"Check if a mandate is valid\"},\"owner()\":{\"notice\":\"Contract owner\"},\"recordPaymentVerification(string,uint256,address,address,bytes32)\":{\"notice\":\"Verify and record a Stripe payment (called by authorized oracle)\"},\"registerMandate(bytes32)\":{\"notice\":\"Register a valid AP2 mandate\"},\"revokeMandate(bytes32)\":{\"notice\":\"Revoke an AP2 mandate\"},\"revokeOracle(address)\":{\"notice\":\"Revoke oracle authorization\"},\"transferOwnership(address)\":{\"notice\":\"Transfer ownership\"},\"validMandates(bytes32)\":{\"notice\":\"Mapping from AP2 mandate ID to validity status\"},\"verifications(string)\":{\"notice\":\"Mapping from payment ID to verification data\"},\"verifyPayment(string,uint256)\":{\"notice\":\"Verify a payment exists and matches expected amount\"}},\"notice\":\"Routes and verifies AP2 payment credentials using Stripe integration\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/PaymentRouter.sol\":\"PaymentRouter\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"],\"viaIR\":true},\"sources\":{\"src/PaymentRouter.sol\":{\"keccak256\":\"0xfec355a01193bad2773a2ab791c50fe7bcb14a04924f3165a838f28278202c61\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://cfd0be338a76051e0d712c1a34682fea4d1e354149fd682c8929552ccbec9abc\",\"dweb:/ipfs/QmePqSQD3MVhm4XccXVnyyJyt7DTDJqqMEHXKyhEUZaQoa\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.26+commit.8a97fa7a"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"InvalidAmount"},{"inputs":[],"type":"error","name":"InvalidMandate"},{"inputs":[],"type":"error","name":"PaymentAlreadyVerified"},{"inputs":[],"type":"error","name":"PaymentNotVerified"},{"inputs":[],"type":"error","name":"Unauthorized"},{"inputs":[{"internalType":"bytes32","name":"mandateId","type":"bytes32","indexed":true}],"type":"event","name":"MandateRegistered","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"mandateId","type":"bytes32","indexed":true}],"type":"event","name":"MandateRevoked","anonymous":false},{"inputs":[{"internalType":"address","name":"oracle","type":"address","indexed":true}],"type":"event","name":"OracleAuthorized","anonymous":false},{"inputs":[{"internalType":"address","name":"oracle","type":"address","indexed":true}],"type":"event","name":"OracleRevoked","anonymous":false},{"inputs":[{"internalType":"string","name":"stripePaymentIntentId","type":"string","indexed":true},{"internalType":"address","name":"payer","type":"address","indexed":true},{"internalType":"address","name":"payee","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false},{"internalType":"bytes32","name":"ap2MandateId","type":"bytes32","indexed":false}],"type":"event","name":"PaymentVerified","anonymous":false},{"inputs":[{"internalType":"address","name":"_oracle","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"authorizeOracle"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"authorizedOracles","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"string","name":"_stripePaymentIntentId","type":"string"}],"stateMutability":"view","type":"function","name":"getPaymentVerification","outputs":[{"internalType":"struct PaymentRouter.PaymentVerification","name":"verification","type":"tuple","components":[{"internalType":"string","name":"stripePaymentIntentId","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"payer","type":"address"},{"internalType":"address","name":"payee","type":"address"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"bool","name":"verified","type":"bool"},{"internalType":"bytes32","name":"ap2MandateId","type":"bytes32"}]}]},{"inputs":[{"internalType":"address","name":"_oracle","type":"address"}],"stateMutability":"view","type":"function","name":"isAuthorizedOracle","outputs":[{"internalType":"bool","name":"authorized","type":"bool"}]},{"inputs":[{"internalType":"bytes32","name":"_mandateId","type":"bytes32"}],"stateMutability":"view","type":"function","name":"isMandateValid","outputs":[{"internalType":"bool","name":"valid","type":"bool"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"string","name":"_stripePaymentIntentId","type":"string"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"address","name":"_payer","type":"address"},{"internalType":"address","name":"_payee","type":"address"},{"internalType":"bytes32","name":"_ap2MandateId","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"recordPaymentVerification"},{"inputs":[{"internalType":"bytes32","name":"_mandateId","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"registerMandate"},{"inputs":[{"internalType":"bytes32","name":"_mandateId","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"revokeMandate"},{"inputs":[{"internalType":"address","name":"_oracle","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"revokeOracle"},{"inputs":[{"internalType":"address","name":"_newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function","name":"validMandates","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","name":"verifications","outputs":[{"internalType":"string","name":"stripePaymentIntentId","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"payer","type":"address"},{"internalType":"address","name":"payee","type":"address"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"bool","name":"verified","type":"bool"},{"internalType":"bytes32","name":"ap2MandateId","type":"bytes32"}]},{"inputs":[{"internalType":"string","name":"_stripePaymentIntentId","type":"string"},{"internalType":"uint256","name":"_expectedAmount","type":"uint256"}],"stateMutability":"view","type":"function","name":"verifyPayment","outputs":[{"internalType":"bool","name":"verified","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{"authorizeOracle(address)":{"params":{"_oracle":"Address to authorize"}},"getPaymentVerification(string)":{"params":{"_stripePaymentIntentId":"Stripe payment intent ID"},"returns":{"verification":"Payment verification structure"}},"isAuthorizedOracle(address)":{"params":{"_oracle":"Address to check"},"returns":{"authorized":"True if address is an authorized oracle"}},"isMandateValid(bytes32)":{"params":{"_mandateId":"AP2 mandate credential ID"},"returns":{"valid":"True if mandate is valid"}},"recordPaymentVerification(string,uint256,address,address,bytes32)":{"params":{"_amount":"Payment amount","_ap2MandateId":"AP2 mandate credential reference","_payee":"Payee address","_payer":"Payer address","_stripePaymentIntentId":"Stripe payment intent ID"}},"registerMandate(bytes32)":{"params":{"_mandateId":"AP2 mandate credential ID"}},"revokeMandate(bytes32)":{"params":{"_mandateId":"AP2 mandate credential ID"}},"revokeOracle(address)":{"params":{"_oracle":"Address to revoke"}},"transferOwnership(address)":{"params":{"_newOwner":"New owner address"}},"verifyPayment(string,uint256)":{"params":{"_expectedAmount":"Expected payment amount","_stripePaymentIntentId":"Stripe payment intent ID"},"returns":{"verified":"True if payment is verified and amount matches"}}},"version":1},"userdoc":{"kind":"user","methods":{"authorizeOracle(address)":{"notice":"Authorize an oracle address"},"authorizedOracles(address)":{"notice":"Authorized oracle addresses for payment verification"},"constructor":{"notice":"Constructor"},"getPaymentVerification(string)":{"notice":"Get payment verification details"},"isAuthorizedOracle(address)":{"notice":"Check if an address is an authorized oracle"},"isMandateValid(bytes32)":{"notice":"Check if a mandate is valid"},"owner()":{"notice":"Contract owner"},"recordPaymentVerification(string,uint256,address,address,bytes32)":{"notice":"Verify and record a Stripe payment (called by authorized oracle)"},"registerMandate(bytes32)":{"notice":"Register a valid AP2 mandate"},"revokeMandate(bytes32)":{"notice":"Revoke an AP2 mandate"},"revokeOracle(address)":{"notice":"Revoke oracle authorization"},"transferOwnership(address)":{"notice":"Transfer ownership"},"validMandates(bytes32)":{"notice":"Mapping from AP2 mandate ID to validity status"},"verifications(string)":{"notice":"Mapping from payment ID to verification data"},"verifyPayment(string,uint256)":{"notice":"Verify a payment exists and matches expected amount"}},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/PaymentRouter.sol":"PaymentRouter"},"evmVersion":"cancun","libraries":{},"viaIR":true},"sources":{"src/PaymentRouter.sol":{"keccak256":"0xfec355a01193bad2773a2ab791c50fe7bcb14a04924f3165a838f28278202c61","urls":["bzz-raw://cfd0be338a76051e0d712c1a34682fea4d1e354149fd682c8929552ccbec9abc","dweb:/ipfs/QmePqSQD3MVhm4XccXVnyyJyt7DTDJqqMEHXKyhEUZaQoa"],"license":"MIT"}},"version":1},"id":24}